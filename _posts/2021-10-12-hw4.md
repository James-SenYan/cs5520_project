---
layout: post
title: "Assignment4: To-do list App verison2, Adding Persistence 
"
---

# <a href="https://github.ccs.neu.edu/senyan/cs5520_project/tree/hw4">Navigate to my code on github.</a>

#post for hw4

## App description:
> - **The most dazzling of this version is that data is completely stored in sqlite database. Hence, data would be reloaded either you reopen the app or change its orientation.**

> - **There is a add button at bottom right corner of the home page. When you click the add button, new task activity is launched. Task title, task details, deadline are prepared to be edited in the activity. Tag which is a dropdown box is contained in the activity as well. Currently there are only three categories in the dropdown box: entertainment, study, work. Users can choose to either save the task or cancel edition.**
![Screenshot_20211012_152723](https://user-images.githubusercontent.com/77960108/137215804-04779645-277d-4fb8-b227-2f17dee9f53e.png)
![Screen Shot 2021-10-13 at 14 38 27](https://user-images.githubusercontent.com/77960108/137216225-a8db2ee6-ab70-4244-9e05-161595a88559.png)


> - **A new task is displayed in the home page when users click save button. There is a checkbox within each task which is used to indicate whether the task is marked as done. Each task has a delete button which enables users to remove specific tasks. Status of tasks updates automatically when the checkbox is selected.**
![Screenshot_20211012_151904](https://user-images.githubusercontent.com/77960108/137215813-1003bbe8-e913-4672-98be-b97eae0f2b38.png)
![Screen Shot 2021-10-12 at 15 26 32](https://user-images.githubusercontent.com/77960108/137215945-eeb03bd7-98ac-4f18-9801-5d43a407992d.png)
![Screen Shot 2021-10-12 at 15 28 11](https://user-images.githubusercontent.com/77960108/137216018-21d843ee-dd83-41af-b5f5-9ed4a41074c2.png)

> - **A menu is located at the top right corner of the home page. Users can delete all tasks on cliking the delete button. More menu items would be added.**

![Screen Shot 2021-10-12 at 15 29 11](https://user-images.githubusercontent.com/77960108/137215831-3029ba1b-ca1f-4b5d-a420-7e913ff9a655.png)

> - **By clicking each task, the edit task activity is launched with pre-populated data. Changes are reflected in the main page if any editions are made.**
![Screenshot_20211013_142127](https://user-images.githubusercontent.com/77960108/137215866-7df7d88c-1260-4984-95b1-8eb33acc16f5.png)

##What I've learnt?
> - The recommended Architecture Components: UI controller which is the mainActivity, newTaskActivity, editTaskActivity in my code is used to display data and manage UI events. 

> - Each ViewHolder is represented as a task. I created the custom taskViewHolder class. Binded string value to each TextView and ClickListener to each button and checkbox.

> - Created custom TaskListAdaper which could be used by the recyclerView. Within the class, onCreateViewHolder() method and onBindViewHolder() are overrided to inflate the layout and load task data. An inner class called TaskDiff is created to observe whether there is any change in the recyclerView.


> - Class annotated as Entity represents a database table. Dao interface consists of varous queries to access database. Operations like deletion, updates, insertions shouldn't run at UI thread. ViewModel acts like a media between repository and RoomDatabase.

> - The deadline field in my entity is stored as a string in the database. This is enabled because of the @TypeConverters({DateConverter.class}) annotations. Two methods are invoked when storing and retriving datetime.

> - LiveData will notify its oberver whenever data has changed. For this todo App, I specify the TaskListAdapter as the observer of all tasks LiveData in MainActivity.

> - To set click actions to my deleteTaskButton, editTaskActivity and checkbox, I binded setOnClickListeners to them in TaskViewHolder constructor.

> - Rather than putting various key-value pairs into intent, put a parcelable value to the intent is convenient. Task must implete  Parcelable.

> - Every time users touch an button within the recyclerView at home page, it's easy to get its position. However, to retrive the task in the databse, we should get its task_id which is auto-incremented in the database as the primary key. Hence, I decide to get index of the first task in the database beforing retriving.




