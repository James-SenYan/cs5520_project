---
layout: post
title: "Assignment4: To-do list App verison2, Adding Persistence 
"
---
## Link to my code on github:
## <a href="https://github.ccs.neu.edu/senyan/cs5520_project">Navigate to my code on github.</a>


## Reminders pop up when tasks approaches deadline.
>- ### When the deadline set before current date, notification pops up once created. Users can tab notification to launch application.
>![Screenshot_20211031_230348](https://user-images.githubusercontent.com/77960108/139629328-2786c8b3-dc93-48e2-ba59-30da8c954245.png)
>![Screenshot_20211031_230224](https://user-images.githubusercontent.com/77960108/139629335-3249f887-b4e5-4c47-8b09-d7f8c6e098a2.png)

>- ### Notification awaits to be sent until the set deadline.
>![Screenshot_20211031_230214](https://user-images.githubusercontent.com/77960108/139629348-d41d052e-29b1-4a0d-a3b9-bf5a4344df7e.png)


## Things I learned:
> - Add notifications settings to applicaiton: In order to send notifications to users, notification channels should be created in advance by calling notificationManager.createNotificationChannel(channel) method.

> - When workManger figures out which work needs to be done, it will trigger its doWork() method. Since our purpose is to send reminders to users, we should put the notification creating process here. 

> - Moreover, users 100% want to see task information like title and details within notification. To implement this, Firstly task information is put into OneTimeWorkRequest instance. Then I should use getInputData() to get data from workManager and pass those data to notification.

> - Another feature about notification is that users are enabled to launch todo list application by clicking the notification. This is achieved by add .setContentIntent(pIntent) method while creating notification.

> - Next problem is about how to set timing for reminders. When creating OneTimeWorkRequest, the .setInitialDelay(duration, TimeUnit.MILLISECONDS) is called. The duration parameter specifies the timing in remaining milliseconds. The duration equals deadline.atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli() - System.currentTimeMillis(); If the deadline is before current date, notifications pop up immediately. Otherwise notifications awaits to be called by work manager.

> - When should those reminders set? The answer is work manager enqueues OneTimeWorkRequest once users start newTaskAcitvity or editTaskActivity.
